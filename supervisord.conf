[supervisord]
nodaemon=true

[program:laravel]
command=php artisan serve --host=0.0.0.0 --port=8000
directory=/var/www/html
autostart=true
autorestart=true

[program:vite]
command=npm run dev
directory=/var/www/html
autostart=true
autorestart=true

[program:migrate]
command=php artisan migrate:fresh --seed
directory=/var/www/html
autostart=true
autorestart=false
startsecs=10

[program:queue-worker]
process_name=%(program_name)s_%(process_num)02d
command=php artisan queue:work --sleep=3 --tries=3 --timeout=300 --memory=256
directory=/var/www/html
autostart=true
autorestart=true
numprocs=8
startretries=3
stopsignal=TERM